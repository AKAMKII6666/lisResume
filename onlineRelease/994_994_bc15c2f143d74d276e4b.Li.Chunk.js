"use strict";(self.webpackChunkmr=self.webpackChunkmr||[]).push([[994],{9836:function(e,t,n){n.r(t),n.d(t,{VRButton:function(){return d}});var o=n(9703),i=n(7585),r=n(9637),a=n(6819),s=n.n(a),d=function(){function e(){(0,i.Z)(this,e)}return(0,r.Z)(e,null,[{key:"createButton",value:function(e,t){t&&console.error('THREE.VRButton: The "options" parameter has been removed. Please set the reference space type via renderer.xr.setReferenceSpaceType() instead.');var n=document.createElement("button");function i(){n.style.display="",n.style.cursor="auto",n.style.left="calc(50% - 75px)",n.style.width="150px",n.onmouseenter=null,n.onmouseleave=null,n.onclick=null,n.textContent="VR NOT SUPPORTED"}function r(e){e.style.position="absolute",e.style.bottom="20px",e.style.padding="12px 6px",e.style.border="1px solid #fff",e.style.borderRadius="4px",e.style.background="rgba(0,0,0,0.1)",e.style.color="#fff",e.style.font="normal 13px sans-serif",e.style.textAlign="center",e.style.opacity="0.5",e.style.outline="none",e.style.zIndex="999"}if("xr"in navigator)return n.id="VRButton",n.style.display="none",r(n),navigator.xr.isSessionSupported("immersive-vr").then((function(t){t?function(){var t=null;function i(e){return r.apply(this,arguments)}function r(){return(r=(0,o.Z)(s().mark((function o(i){return s().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return i.addEventListener("end",a),o.next=3,e.xr.setSession(i);case 3:n.textContent="EXIT VR",t=i;case 5:case"end":return o.stop()}}),o)})))).apply(this,arguments)}function a(){t.removeEventListener("end",a),n.textContent="ENTER VR",t=null}n.style.display="",n.style.cursor="pointer",n.style.left="calc(50% - 50px)",n.style.width="100px",n.textContent="ENTER VR",n.onmouseenter=function(){n.style.opacity="1.0"},n.onmouseleave=function(){n.style.opacity="0.5"},n.onclick=function(){null===t?navigator.xr.requestSession("immersive-vr",{optionalFeatures:["local-floor","bounded-floor","hand-tracking"]}).then(i):t.end()}}():i()})),n;var a=document.createElement("a");return!1===window.isSecureContext?(a.href=document.location.href.replace(/^http:/,"https:"),a.innerHTML="WEBXR NEEDS HTTPS"):(a.href="https://immersiveweb.dev/",a.innerHTML="WEBXR NOT AVAILABLE"),a.style.left="calc(50% - 90px)",a.style.width="180px",a.style.textDecoration="none",r(a),a}}]),e}()},717:function(e,t,n){n.r(t),n.d(t,{APP:function(){return o}});var o={Player:function(){var e=this,t=new THREE.WebGLRenderer({antialias:!0});t.setPixelRatio(window.devicePixelRatio),t.outputEncoding=THREE.sRGBEncoding,t.shadowMap.type=THREE.PCFSoftShadowMap;var n,o,i=new THREE.ObjectLoader;this.camera=n,this.scene=o;var r,a,s,d=VRButton.createButton(t),c={},p=document.createElement("div");function l(e,t){for(var n=0,o=e.length;n<o;n++)e[n](t)}function u(){r=performance.now();try{void 0!==e.animateCall&&e.animateCall(),l(c.update,{time:r-a,delta:r-s})}catch(e){console.error(e.message||e,e.stack||"")}t.render(o,n),s=r}function h(e){l(c.keydown,e)}function v(e){l(c.keyup,e)}function f(e){l(c.pointerdown,e)}function m(e){l(c.pointerup,e)}function w(e){l(c.pointermove,e)}p.appendChild(t.domElement),this.dom=p,this.width=500,this.height=500,this.load=function(e){var r=e.project;void 0!==r.vr&&(t.xr.enabled=r.vr),void 0!==r.shadows&&(t.shadowMap.enabled=r.shadows),void 0!==r.shadowType&&(t.shadowMap.type=THREE.PCFSoftShadowMap),void 0!==r.toneMapping&&(t.toneMapping=r.toneMapping),void 0!==r.toneMappingExposure&&(t.toneMappingExposure=r.toneMappingExposure),void 0!==r.physicallyCorrectLights&&(t.physicallyCorrectLights=r.physicallyCorrectLights),this.setScene(i.parse(e.scene)),this.setCamera(i.parse(e.camera)),c={init:[],start:[],stop:[],keydown:[],keyup:[],pointerdown:[],pointerup:[],pointermove:[],update:[]};var a="player,renderer,scene,camera",s={};for(var d in c)a+=","+d,s[d]=d;var p=JSON.stringify(s).replace(/\"/g,"");for(var u in e.scripts){var h=o.getObjectByProperty("uuid",u,!0);if(void 0!==h)for(var v=e.scripts[u],f=0;f<v.length;f++){var m=v[f],w=new Function(a,m.source+"\nreturn "+p+";").bind(h)(this,t,o,n);for(var y in w)void 0!==w[y]&&(void 0!==c[y]?c[y].push(w[y].bind(h)):console.warn("APP.Player: Event type not supported (",y,")"))}else console.warn("APP.Player: Script without object.",u)}l(c.init,arguments)},this.setCamera=function(e){(n=e).aspect=this.width/this.height,n.updateProjectionMatrix(),this.camera=n},this.setPrf=function(e){for(var t=0;t<e.children.length;t++){var n=e.children[t];if(("PointLight"===n.name||"SpotLight"===n.name)&&("low"===window.gCardLevel||"mid"===window.gCardLevel?(n.shadowMapWidth=0,n.shadowMapHeight=0):"high"===window.gCardLevel?(n.shadowMapWidth=1024,n.shadowMapHeight=1024):(n.shadowMapWidth=2048,n.shadowMapHeight=2048),void 0!==n.shadow&&void 0!==n.shadow.map))try{n.shadow.map.dispose(),n.shadow.map=null}catch(e){}}return e},this.setScene=function(e){e=this.setPrf(e),o=e,this.scene=e},this.setPixelRatio=function(e){t.setPixelRatio(e)},this.setSize=function(e,o){this.width=e,this.height=o,n&&(n.aspect=this.width/this.height,n.updateProjectionMatrix()),t&&("low"===window.gCardLevel&&t.setSize(e/8,o/8),"mid"===window.gCardLevel&&t.setSize(e/4,o/4),"high"===window.gCardLevel&&t.setSize(e/2,o/2),"ultra"===window.gCardLevel&&t.setSize(e,o))},this.play=function(){t.xr.enabled&&p.append(d),a=s=performance.now(),document.addEventListener("keydown",h),document.addEventListener("keyup",v),document.addEventListener("pointerdown",f),document.addEventListener("pointerup",m),document.addEventListener("pointermove",w),l(c.start,arguments),t.setAnimationLoop(u)},this.stop=function(){t.xr.enabled&&d.remove(),document.removeEventListener("keydown",h),document.removeEventListener("keyup",v),document.removeEventListener("pointerdown",f),document.removeEventListener("pointerup",m),document.removeEventListener("pointermove",w),l(c.stop,arguments),t.setAnimationLoop(null)},this.render=function(e){l(c.update,{time:1e3*e,delta:0}),t.render(o,n)},this.dispose=function(){t.dispose(),n=void 0,o=void 0}}}}}]);